
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Template &middot; Bootstrap</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <script src="http://code.jquery.com/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="./CDMI.js" type="text/javascript" charset="utf-8"></script>

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    <link href="css/common.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="ico/favicon.png">
  </head>

  <body>

    <div class="container-narrow">

      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#">About</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
        <h3 class="muted">Project name</h3>
      </div>

      <hr>

      <div class="row-fluid marketing">
        <div class="span11 offset1">

			<div class='well'>
				<span class="label label-info" style='float:right;'>Bacteria</span>
				<h3 id='feature_function'></h3>
				<table style='width:100%;'><tr>	
						<td>Genome <span class='klinks2' id='genome_name'></span><td/>
						<td>KBase Id <span class='klinks2' id='feature_id'></span> <td/>
						<td>DNA Size <span class='klinks2' id='feature_length'></span> <td/>
						<td>Location <span class='klinks2' id='feature_location'></span> <td/>
				</tr></table>

				<br/>
				<div class='btngrp'>
					<div class="btn-group">

						 <a href='#literature2' class="btn btn-mini btn-success" id='litbtn' type="button">Literature</a>
						 <a href='#annotation2' class="btn btn-mini btn-success" id='annbtn' type="button">Annotation</a>
						 <a href='#subsystem' class="btn btn-mini btn-success" id='annbtn' type="button">Subsystem</a>
						 <a href='#co-expressed' class="btn btn-mini btn-success" id='coebtn' type="button">Co-expressed</a>
						 <a href='#co-occur' class="btn btn-mini btn-success" id='coobtn' type="button">Co-occurences</a>
						 <a href='#dna-seq' class="btn btn-mini btn-success" id='dnabtn' type="button">DNA Sequence</a>
						 <a href='#protein-seq' class="btn btn-mini btn-success" id='probtn' type="button">Protein Sequence</a>
					</div>
				</div>

			</div>

			<a name='literature2' ></a>
			<div class='literature-enclosure' id='literature-enclosure'>
			  <div id='literature'></div>
	  	  	</div>

			<a name='annotation2' ></a>
			<div class='annotation-enclosure'>
			  <div id='annotation'></div>
	  	  	</div>

			<a name='subsystem' ></a>
			<div class='subsystem-enclosure'>
				<div>
			  		<dl id='subsystem'></dl>
				</div>
	  	  	</div>

			<a name='co-expressed' ></a>
			<div class='co-expressed-enclosure'>
				<table class="table">
				  <thead>
					<tr>
					  <th>#</th>
					  <th>Id 1</th>
					  <th>Id 2</th>
					  <th>Pearson Coefficient</th>
					</tr>
				  </thead>
				  <tbody id='co-expressed'>
				  </tbody>
				</table>
	  	  	</div>

			<a name='co-occur' ></a>
			<div class='co-occur-enclosure'>

				<table class="table">
				  <thead>
					<tr>
					  <th>#</th>
					  <th>Id 1</th>
					  <th>Id 2</th>
					  <th>Occurences</th>
					</tr>
				  </thead>
				  <tbody id='co-occur'>
				  </tbody>
				</table>

	  	  	</div>

			<a name='dna-seq' ></a>
			<div class='dna-enclosure'>
				<div id='dna-seq' class='sequence' >
				</div>
	  	  	</div>

			<a name='protein-seq' ></a>
			<div class='protein-enclosure'>
				<div id='protein-seq' class='sequence' >
				</div>
	  	  	</div>



        </div>

      </div>

      <hr>

      <div class="footer">
        <p>&copy; KBase Search </p>
      </div>

    </div> <!-- /container -->

	<script src="js/bootstrap.min.js"></script>
	<script src="js/common.js"></script>
    <script>
    $(function () {

		/*
		var fid = 'kb|g.0.peg.1089';
		var fid = 'kb|g.0.ar.44';
		var fid = 'kb|g.0.peg.1457';
		var fid = 'kb|g.8776';
		var fid = 'kb|g.0.rna.2';
		*/
		var fid = 'kb|g.0.peg.133';
		var fids = [fid];
        var api = new CDMI_API('http://kbase.us/services/cdmi_api');
  
        api.fids_to_literature_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#litbtn').hide();
					$('#literature-enclosure').hide();

				} else {
					for (var id in results) {
						var pubs = results[id];
						for (var i = 0; i < pubs.length; i++ ) {
							var txt = pubs[i];
							var text2 = i + 1 + '. ' + txt[2] + '<br/>' +
									'<span class="klinks">' + txt[1] + '</span>' +
									'<a href="' + txt[1] + '">' + 'PUBMED:' + txt[0] + '</a><br/><br/>';
							//$('#literature').append($('<blockquote>').html(txt[2]).append('<br/>').append(text2).text('PUBMED:' + txt[0] ));
							$('#literature').append($('<div>').html(text2));
						}
					}
				}
            }, function( error ) {

              alert(error);
            
          });

        api.fids_to_feature_data_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
				} else {
					var result = results[fid];
					for (var id in results[fid]) {
						var value = result[id];
						$('#' + id).text(value);
					}
				}
            }, function( error ) {
              alert(error);
        });

        api.fids_to_annotations_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#annbtn').hide();
					$('#annotation-enclosure').hide();

				} else {
					for (var id in results) {
						var pubs = results[id];
						for (var i = 0; i < pubs.length; i++ ) {
							var txt = pubs[i];
							var time = timeConverter(txt[2]);

							var markup = '<img src="img/User.png" style="float:left;padding:5px;" />' +
										'<h4 style="padding-top:5px;">' + txt[1] + '</h4> ' +
										'<span class="klinks">' + time + '</span> <br/>' +
										'<div style="padding-left:60px;">' + txt[0] + '</div> <br/>' ;
							$('#annotation').append($('<div class="item">').html(markup));
						}
					}
				}
            }, function( error ) {
              alert(error);
        });

        api.fids_to_coexpressed_fids_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#coebtn').hide();
					$('#co-expressed-enclosure').hide();
				} else {
					var result = results[fid];
					for (var i = 0; i < result.length; i++ ) {
						var txt = result[i];
						//var markup = '<a href="#"><i class="icon-ok-sign"></i>' + txt[0] + '</a>';
                		var markup = '<tr><td>'+ (i+1) + '</td><td>'+ fid + '</td><td><a href="">'+ txt[0] +'</a></td><td>'+txt[1]+'</td></tr>';
						$('#co-expressed').html( $('#co-expressed').html() + markup);
					}
				}
            }, function( error ) {
              alert(error);
        });

        api.fids_to_co_occurring_fids_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#cocbtn').hide();
					$('#co-occur-enclosure').hide();
				} else {
					var result = results[fid];
					for (var i = 0; i < result.length; i++ ) {
						var txt = result[i];
                		var markup = '<tr><td>'+ (i+1) + '</td><td>'+ fid + '</td><td><a href="">'+ txt[0] +'</a></td><td>'+txt[1]+'</td></tr>';
						$('#co-occur').html( $('#co-occur').html() + markup);
					}
				}
            }, function( error ) {

              alert(error);
            
        });

        api.fids_to_dna_sequences_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#dnabtn').hide();
					$('#dna-seq--enclosure').hide();
				} else {
					var result = results[fid];
					$('#dna-seq').html(result);
				}
            }, function( error ) {
              alert(error);
        });

        api.fids_to_protein_sequences_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#probtn').hide();
					$('#protein-seq--enclosure').hide();
				
				} else {
					var result = results[fid];
					$('#protein-seq').html(result);
				}
            }, function( error ) {
              alert(error);
        });

        api.fids_to_subsystem_data_async(fids, 
			function (results) {
				if ($.isEmptyObject(results)) {
					$('#subsystem-enclosure').hide();
				} else {
					var result = results[fid];
					for (var i = 0; i < result.length; i++ ) {
						var markup = '<dt>'+ (i+1) + '. ' + result[i][0] + '</dt><dd>'+ result[i][2] + '</dd><br/>';
						$('#subsystem').html( $('#subsystem').html() + markup );
					}
				}
            }, function( error ) {
              alert(error);
        });


    })
    </script>
  </body>
</html>

